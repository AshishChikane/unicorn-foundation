import{e as ae,f as de,aP as C,j as Ys}from"./index-DgnzOXt0.js";import{p as Js,f as Xs}from"./hooks.module-C1Q1ETt2.js";var cs={},be={},Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.walletLogo=void 0;const en=(t,e)=>{let s;switch(t){case"standard":return s=e,`data:image/svg+xml,%3Csvg width='${e}' height='${s}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return s=e,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${s}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return s=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${s}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return s=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${s}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return s=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${s}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return s=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${s}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return s=e,`data:image/svg+xml,%3Csvg width='${e}' height='${s}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};Te.walletLogo=en;var je={};Object.defineProperty(je,"__esModule",{value:!0});je.LINK_API_URL=void 0;je.LINK_API_URL="https://www.walletlink.org";var tn=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});exports.isMobileWeb=exports.getLocation=exports.isInIFrame=exports.createQrUrl=exports.getFavicon=exports.range=exports.isBigNumber=exports.ensureParsedJSONObject=exports.ensureBN=exports.ensureRegExpString=exports.ensureIntNumber=exports.ensureBuffer=exports.ensureAddressString=exports.ensureEvenLengthHexString=exports.ensureHexString=exports.isHexString=exports.prepend0x=exports.strip0x=exports.has0xPrefix=exports.hexStringFromIntNumber=exports.intNumberFromHexString=exports.bigIntStringFromBN=exports.hexStringFromBuffer=exports.hexStringToUint8Array=exports.uint8ArrayToHex=exports.randomBytesHex=void 0;const H=tn(require("bn.js")),K=require("./error"),L=require("./type"),ds=/^[0-9]*$/,ls=/^[a-f0-9]*$/;function sn(t){return hs(crypto.getRandomValues(new Uint8Array(t)))}exports.randomBytesHex=sn;function hs(t){return[...t].map(e=>e.toString(16).padStart(2,"0")).join("")}exports.uint8ArrayToHex=hs;function nn(t){return new Uint8Array(t.match(/.{1,2}/g).map(e=>parseInt(e,16)))}exports.hexStringToUint8Array=nn;function rn(t,e=!1){const s=t.toString("hex");return(0,L.HexString)(e?`0x${s}`:s)}exports.hexStringFromBuffer=rn;function an(t){return(0,L.BigIntString)(t.toString(10))}exports.bigIntStringFromBN=an;function on(t){return(0,L.IntNumber)(new H.default(_e(t,!1),16).toNumber())}exports.intNumberFromHexString=on;function cn(t){return(0,L.HexString)(`0x${new H.default(t).toString(16)}`)}exports.hexStringFromIntNumber=cn;function mt(t){return t.startsWith("0x")||t.startsWith("0X")}exports.has0xPrefix=mt;function Be(t){return mt(t)?t.slice(2):t}exports.strip0x=Be;function us(t){return mt(t)?`0x${t.slice(2)}`:`0x${t}`}exports.prepend0x=us;function pe(t){if(typeof t!="string")return!1;const e=Be(t).toLowerCase();return ls.test(e)}exports.isHexString=pe;function fs(t,e=!1){if(typeof t=="string"){const s=Be(t).toLowerCase();if(ls.test(s))return(0,L.HexString)(e?`0x${s}`:s)}throw K.standardErrors.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}exports.ensureHexString=fs;function _e(t,e=!1){let s=fs(t,!1);return s.length%2===1&&(s=(0,L.HexString)(`0${s}`)),e?(0,L.HexString)(`0x${s}`):s}exports.ensureEvenLengthHexString=_e;function dn(t){if(typeof t=="string"){const e=Be(t).toLowerCase();if(pe(e)&&e.length===40)return(0,L.AddressString)(us(e))}throw K.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`)}exports.ensureAddressString=dn;function ln(t){if(ae.Buffer.isBuffer(t))return t;if(typeof t=="string"){if(pe(t)){const e=_e(t,!1);return ae.Buffer.from(e,"hex")}return ae.Buffer.from(t,"utf8")}throw K.standardErrors.rpc.invalidParams(`Not binary data: ${String(t)}`)}exports.ensureBuffer=ln;function gs(t){if(typeof t=="number"&&Number.isInteger(t))return(0,L.IntNumber)(t);if(typeof t=="string"){if(ds.test(t))return(0,L.IntNumber)(Number(t));if(pe(t))return(0,L.IntNumber)(new H.default(_e(t,!1),16).toNumber())}throw K.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}exports.ensureIntNumber=gs;function hn(t){if(t instanceof RegExp)return(0,L.RegExpString)(t.toString());throw K.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(t)}`)}exports.ensureRegExpString=hn;function un(t){if(t!==null&&(H.default.isBN(t)||bs(t)))return new H.default(t.toString(10),10);if(typeof t=="number")return new H.default(gs(t));if(typeof t=="string"){if(ds.test(t))return new H.default(t,10);if(pe(t))return new H.default(_e(t,!1),16)}throw K.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}exports.ensureBN=un;function fn(t){if(typeof t=="string")return JSON.parse(t);if(typeof t=="object")return t;throw K.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`)}exports.ensureParsedJSONObject=fn;function bs(t){if(t==null||typeof t.constructor!="function")return!1;const{constructor:e}=t;return typeof e.config=="function"&&typeof e.EUCLID=="number"}exports.isBigNumber=bs;function gn(t,e){return Array.from({length:e-t},(s,n)=>t+n)}exports.range=gn;function bn(){const t=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:e,host:s}=document.location,n=t?t.getAttribute("href"):null;return!n||n.startsWith("javascript:")||n.startsWith("vbscript:")?null:n.startsWith("http://")||n.startsWith("https://")||n.startsWith("data:")?n:n.startsWith("//")?e+n:`${e}//${s}${n}`}exports.getFavicon=bn;function pn(t,e,s,n,r,a){const o=n?"parent-id":"id",i=new URLSearchParams({[o]:t,secret:e,server:s,v:r,chainId:a.toString()}).toString();return`${s}/#/link?${i}`}exports.createQrUrl=pn;function ps(){try{return window.frameElement!==null}catch{return!1}}exports.isInIFrame=ps;function _n(){try{return ps()&&window.top?window.top.location:window.location}catch{return window.location}}exports.getLocation=_n;function wn(){var t;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((t=window==null?void 0:window.navigator)===null||t===void 0?void 0:t.userAgent)}exports.isMobileWeb=wn;const mn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Y=de(mn);var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.ScopedLocalStorage=void 0;class vn{constructor(e){this.scope=e}setItem(e,s){localStorage.setItem(this.scopedKey(e),s)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),s=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);typeof r=="string"&&r.startsWith(e)&&s.push(r)}s.forEach(n=>localStorage.removeItem(n))}scopedKey(e){return`${this.scope}:${e}`}}Ue.ScopedLocalStorage=vn;var _s=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});exports.CoinbaseWalletProvider=void 0;const yn=_s(require("bn.js")),En=require("eventemitter3"),b=require("../core/error"),f=require("../core/util"),kn=require("../relay/mobile/MobileRelay"),Bt=require("../relay/RelayAbstract"),Ne=require("../relay/Session"),A=require("../relay/walletlink/type/Web3Response"),dt=_s(require("../vendor-js/eth-eip712-util")),fe=require("./DiagnosticLogger"),Cn=require("./FilterPolyfill"),xn=require("./SubscriptionManager"),Ut="DefaultChainId",Wt="DefaultJsonRpcUrl";class Sn extends En.EventEmitter{constructor(e){var s,n;super(),this._filterPolyfill=new Cn.FilterPolyfill(this),this._subscriptionManager=new xn.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(s=e.overrideIsCoinbaseWallet)!==null&&s!==void 0?s:!0,this.isCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this.qrUrl=e.qrUrl;const r=this.getChainId(),a=(0,f.prepend0x)(r.toString(16));this.emit("connect",{chainIdStr:a});const o=this._storage.getItem(Bt.LOCAL_STORAGE_ADDRESSES_KEY);if(o){const i=o.split(" ");i[0]!==""&&(this._addresses=i.map(c=>(0,f.ensureAddressString)(c)),this.emit("accountsChanged",i))}this._subscriptionManager.events.on("notification",i=>{this.emit("message",{type:i.method,data:i.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",i=>{var c;if(!(i.origin!==location.origin||i.source!==window)&&i.data.type==="walletLinkMessage"&&i.data.data.action==="dappChainSwitched"){const d=i.data.data.chainId,h=(c=i.data.data.jsonRpcUrl)!==null&&c!==void 0?c:this.jsonRpcUrl;this.updateProviderInfo(h,Number(d))}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,f.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(Wt))!==null&&e!==void 0?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(Wt,e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,s){this.isCoinbaseBrowser||(this._chainIdFromOpts=s,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,s){this.jsonRpcUrl=e;const n=this.getChainId();this._storage.setItem(Ut,s.toString(10)),((0,f.ensureIntNumber)(s)!==n||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,s,n,r,a,o){const c=await(await this.initializeRelay()).watchAsset(e,s,n,r,a,o==null?void 0:o.toString()).promise;return(0,A.isErrorResponse)(c)?!1:!!c.result}async addEthereumChain(e,s,n,r,a,o){var i,c;if((0,f.ensureIntNumber)(e)===this.getChainId())return!1;const d=await this.initializeRelay(),h=d.inlineAddEthereumChain(e.toString());!this._isAuthorized()&&!h&&await d.requestEthereumAccounts().promise;const u=await d.addEthereumChain(e.toString(),s,a,n,r,o).promise;return(0,A.isErrorResponse)(u)?!1:(((i=u.result)===null||i===void 0?void 0:i.isApproved)===!0&&this.updateProviderInfo(s[0],e),((c=u.result)===null||c===void 0?void 0:c.isApproved)===!0)}async switchEthereumChain(e){const n=await(await this.initializeRelay()).switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if((0,A.isErrorResponse)(n)){if(!n.errorCode)return;throw n.errorCode===b.standardErrorCodes.provider.unsupportedChain?b.standardErrors.provider.unsupportedChain():b.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode})}const r=n.result;r.isApproved&&r.rpcUrl.length>0&&this.updateProviderInfo(r.rpcUrl,e)}setAppInfo(e,s){this.initializeRelay().then(n=>n.setAppInfo(e,s))}async enable(){var e;return(e=this.diagnostic)===null||e===void 0||e.log(fe.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?Ne.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send("eth_requestAccounts")}async close(){(await this.initializeRelay()).resetAndReload()}send(e,s){try{const n=this._send(e,s);if(n instanceof Promise)return n.catch(r=>{throw(0,b.serializeError)(r,e)})}catch(n){throw(0,b.serializeError)(n,e)}}_send(e,s){if(typeof e=="string"){const r=e,a=Array.isArray(s)?s:s!==void 0?[s]:[],o={jsonrpc:"2.0",id:0,method:r,params:a};return this._sendRequestAsync(o).then(i=>i.result)}if(typeof s=="function"){const r=e,a=s;return this._sendAsync(r,a)}if(Array.isArray(e))return e.map(a=>this._sendRequest(a));const n=e;return this._sendRequest(n)}async sendAsync(e,s){try{return this._sendAsync(e,s).catch(n=>{throw(0,b.serializeError)(n,e)})}catch(n){return Promise.reject((0,b.serializeError)(n,e))}}async _sendAsync(e,s){if(typeof s!="function")throw new Error("callback is required");if(Array.isArray(e)){const r=s;this._sendMultipleRequestsAsync(e).then(a=>r(null,a)).catch(a=>r(a,null));return}const n=s;return this._sendRequestAsync(e).then(r=>n(null,r)).catch(r=>n(r,null))}async request(e){try{return this._request(e).catch(s=>{throw(0,b.serializeError)(s,e.method)})}catch(s){return Promise.reject((0,b.serializeError)(s,e.method))}}async _request(e){if(!e||typeof e!="object"||Array.isArray(e))throw b.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});const{method:s,params:n}=e;if(typeof s!="string"||s.length===0)throw b.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw b.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});const r=n===void 0?[]:n,a=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:s,params:r,jsonrpc:"2.0",id:a})).result}async scanQRCode(e){const n=await(await this.initializeRelay()).scanQRCode((0,f.ensureRegExpString)(e)).promise;if((0,A.isErrorResponse)(n))throw(0,b.serializeError)(n.errorMessage,"scanQRCode");if(typeof n.result!="string")throw(0,b.serializeError)("result was not a string","scanQRCode");return n.result}async genericRequest(e,s){const r=await(await this.initializeRelay()).genericRequest(e,s).promise;if((0,A.isErrorResponse)(r))throw(0,b.serializeError)(r.errorMessage,"generic");if(typeof r.result!="string")throw(0,b.serializeError)("result was not a string","generic");return r.result}async connectAndSignIn(e){var s;(s=this.diagnostic)===null||s===void 0||s.log(fe.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::connectAndSignIn",sessionIdHash:this._relay?Ne.Session.hash(this._relay.session.id):void 0});let n;try{const a=await this.initializeRelay();if(!(a instanceof kn.MobileRelay))throw new Error("connectAndSignIn is only supported on mobile");if(n=await a.connectAndSignIn(e).promise,(0,A.isErrorResponse)(n))throw new Error(n.errorMessage)}catch(a){throw typeof a.message=="string"&&a.message.match(/(denied|rejected)/i)?b.standardErrors.provider.userRejectedRequest("User denied account authorization"):a}if(!n.result)throw new Error("accounts received is empty");const{accounts:r}=n.result;return this._setAddresses(r),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),n.result}async selectProvider(e){const n=await(await this.initializeRelay()).selectProvider(e).promise;if((0,A.isErrorResponse)(n))throw(0,b.serializeError)(n.errorMessage,"selectProvider");if(typeof n.result!="string")throw(0,b.serializeError)("result was not a string","selectProvider");return n.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){const s={jsonrpc:"2.0",id:e.id},{method:n}=e;if(s.result=this._handleSynchronousMethods(e),s.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${n} synchronously without a callback. Please provide a callback parameter to call ${n} asynchronously.`);return s}_setAddresses(e,s){if(!Array.isArray(e))throw new Error("addresses is not an array");const n=e.map(r=>(0,f.ensureAddressString)(r));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,this.emit("accountsChanged",this._addresses),this._storage.setItem(Bt.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" ")))}_sendRequestAsync(e){return new Promise((s,n)=>{try{const r=this._handleSynchronousMethods(e);if(r!==void 0)return s({jsonrpc:"2.0",id:e.id,result:r});const a=this._handleAsynchronousFilterMethods(e);if(a!==void 0){a.then(i=>s(Object.assign(Object.assign({},i),{id:e.id}))).catch(i=>n(i));return}const o=this._handleSubscriptionMethods(e);if(o!==void 0){o.then(i=>s({jsonrpc:"2.0",id:e.id,result:i.result})).catch(i=>n(i));return}}catch(r){return n(r)}this._handleAsynchronousMethods(e).then(r=>r&&s(Object.assign(Object.assign({},r),{id:e.id}))).catch(r=>n(r))})}_sendMultipleRequestsAsync(e){return Promise.all(e.map(s=>this._sendRequestAsync(s)))}_handleSynchronousMethods(e){const{method:s}=e,n=e.params||[];switch(s){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"eth_uninstallFilter":return this._eth_uninstallFilter(n);case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){const{method:s}=e,n=e.params||[];switch(s){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(n);case"eth_ecRecover":return this._eth_ecRecover(n);case"personal_sign":return this._personal_sign(n);case"personal_ecRecover":return this._personal_ecRecover(n);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(n);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(n);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(n);case"cbWallet_arbitrary":return this._cbwallet_arbitrary(n);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(n);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(n);case"wallet_watchAsset":return this._wallet_watchAsset(n)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl).catch(a=>{var o;throw(a.code===b.standardErrorCodes.rpc.methodNotFound||a.code===b.standardErrorCodes.rpc.methodNotSupported)&&((o=this.diagnostic)===null||o===void 0||o.log(fe.EVENTS.METHOD_NOT_IMPLEMENTED,{method:e.method,sessionIdHash:this._relay?Ne.Session.hash(this._relay.session.id):void 0})),a})}_handleAsynchronousFilterMethods(e){const{method:s}=e,n=e.params||[];switch(s){case"eth_newFilter":return this._eth_newFilter(n);case"eth_newBlockFilter":return this._eth_newBlockFilter();case"eth_newPendingTransactionFilter":return this._eth_newPendingTransactionFilter();case"eth_getFilterChanges":return this._eth_getFilterChanges(n);case"eth_getFilterLogs":return this._eth_getFilterLogs(n)}}_handleSubscriptionMethods(e){switch(e.method){case"eth_subscribe":case"eth_unsubscribe":return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{const s=(0,f.ensureAddressString)(e);return this._addresses.map(r=>(0,f.ensureAddressString)(r)).includes(s)}catch{}return!1}_ensureKnownAddress(e){var s;if(!this._isKnownAddress(e))throw(s=this.diagnostic)===null||s===void 0||s.log(fe.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const s=e.from?(0,f.ensureAddressString)(e.from):this.selectedAddress;if(!s)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(s);const n=e.to?(0,f.ensureAddressString)(e.to):null,r=e.value!=null?(0,f.ensureBN)(e.value):new yn.default(0),a=e.data?(0,f.ensureBuffer)(e.data):ae.Buffer.alloc(0),o=e.nonce!=null?(0,f.ensureIntNumber)(e.nonce):null,i=e.gasPrice!=null?(0,f.ensureBN)(e.gasPrice):null,c=e.maxFeePerGas!=null?(0,f.ensureBN)(e.maxFeePerGas):null,d=e.maxPriorityFeePerGas!=null?(0,f.ensureBN)(e.maxPriorityFeePerGas):null,h=e.gas!=null?(0,f.ensureBN)(e.gas):null,u=e.chainId?(0,f.ensureIntNumber)(e.chainId):this.getChainId();return{fromAddress:s,toAddress:n,weiValue:r,data:a,nonce:o,gasPriceInWei:i,maxFeePerGas:c,maxPriorityFeePerGas:d,gasLimit:h,chainId:u}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw b.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw b.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,s,n,r){this._ensureKnownAddress(s);try{const o=await(await this.initializeRelay()).signEthereumMessage(e,s,n,r).promise;if((0,A.isErrorResponse)(o))throw new Error(o.errorMessage);return{jsonrpc:"2.0",id:0,result:o.result}}catch(a){throw typeof a.message=="string"&&a.message.match(/(denied|rejected)/i)?b.standardErrors.provider.userRejectedRequest("User denied message signature"):a}}async _ethereumAddressFromSignedMessage(e,s,n){const a=await(await this.initializeRelay()).ethereumAddressFromSignedMessage(e,s,n).promise;if((0,A.isErrorResponse)(a))throw new Error(a.errorMessage);return{jsonrpc:"2.0",id:0,result:a.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,f.hexStringFromIntNumber)(this.getChainId())}getChainId(){const e=this._storage.getItem(Ut);if(!e)return(0,f.ensureIntNumber)(this._chainIdFromOpts);const s=parseInt(e,10);return(0,f.ensureIntNumber)(s)}async _eth_requestAccounts(){var e;if((e=this.diagnostic)===null||e===void 0||e.log(fe.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?Ne.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let s;try{if(s=await(await this.initializeRelay()).requestEthereumAccounts().promise,(0,A.isErrorResponse)(s))throw new Error(s.errorMessage)}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?b.standardErrors.provider.userRejectedRequest("User denied account authorization"):n}if(!s.result)throw new Error("accounts received is empty");return this._setAddresses(s.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();const s=(0,f.ensureAddressString)(e[0]),n=(0,f.ensureBuffer)(e[1]);return this._signEthereumMessage(n,s,!1)}_eth_ecRecover(e){const s=(0,f.ensureBuffer)(e[0]),n=(0,f.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(s,n,!1)}_personal_sign(e){this._requireAuthorization();const s=(0,f.ensureBuffer)(e[0]),n=(0,f.ensureAddressString)(e[1]);return this._signEthereumMessage(s,n,!0)}_personal_ecRecover(e){const s=(0,f.ensureBuffer)(e[0]),n=(0,f.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(s,n,!0)}async _eth_signTransaction(e){this._requireAuthorization();const s=this._prepareTransactionParams(e[0]||{});try{const r=await(await this.initializeRelay()).signEthereumTransaction(s).promise;if((0,A.isErrorResponse)(r))throw new Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?b.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_sendRawTransaction(e){const s=(0,f.ensureBuffer)(e[0]),r=await(await this.initializeRelay()).submitEthereumTransaction(s,this.getChainId()).promise;if((0,A.isErrorResponse)(r))throw new Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}async _eth_sendTransaction(e){this._requireAuthorization();const s=this._prepareTransactionParams(e[0]||{});try{const r=await(await this.initializeRelay()).signAndSubmitEthereumTransaction(s).promise;if((0,A.isErrorResponse)(r))throw new Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}catch(n){throw typeof n.message=="string"&&n.message.match(/(denied|rejected)/i)?b.standardErrors.provider.userRejectedRequest("User denied transaction signature"):n}}async _eth_signTypedData_v1(e){this._requireAuthorization();const s=(0,f.ensureParsedJSONObject)(e[0]),n=(0,f.ensureAddressString)(e[1]);this._ensureKnownAddress(n);const r=dt.default.hashForSignTypedDataLegacy({data:s}),a=JSON.stringify(s,null,2);return this._signEthereumMessage(r,n,!1,a)}async _eth_signTypedData_v3(e){this._requireAuthorization();const s=(0,f.ensureAddressString)(e[0]),n=(0,f.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(s);const r=dt.default.hashForSignTypedData_v3({data:n}),a=JSON.stringify(n,null,2);return this._signEthereumMessage(r,s,!1,a)}async _eth_signTypedData_v4(e){this._requireAuthorization();const s=(0,f.ensureAddressString)(e[0]),n=(0,f.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(s);const r=dt.default.hashForSignTypedData_v4({data:n}),a=JSON.stringify(n,null,2);return this._signEthereumMessage(r,s,!1,a)}async _cbwallet_arbitrary(e){const s=e[0],n=e[1];if(typeof n!="string")throw new Error("parameter must be a string");if(typeof s!="object"||s===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(s,n)}}async _wallet_addEthereumChain(e){var s,n,r,a;const o=e[0];if(((s=o.rpcUrls)===null||s===void 0?void 0:s.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!o.chainName||o.chainName.trim()==="")throw b.standardErrors.rpc.invalidParams("chainName is a required field");if(!o.nativeCurrency)throw b.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const i=parseInt(o.chainId,16);return await this.addEthereumChain(i,(n=o.rpcUrls)!==null&&n!==void 0?n:[],(r=o.blockExplorerUrls)!==null&&r!==void 0?r:[],o.chainName,(a=o.iconUrls)!==null&&a!==void 0?a:[],o.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){const s=e[0];return await this.switchEthereumChain(parseInt(s.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){const s=Array.isArray(e)?e[0]:e;if(!s.type)throw b.standardErrors.rpc.invalidParams("Type is required");if((s==null?void 0:s.type)!=="ERC20")throw b.standardErrors.rpc.invalidParams(`Asset of type '${s.type}' is not supported`);if(!(s!=null&&s.options))throw b.standardErrors.rpc.invalidParams("Options are required");if(!(s!=null&&s.options.address))throw b.standardErrors.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:r,symbol:a,image:o,decimals:i}=s.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(s.type,r,a,i,o,n)}}_eth_uninstallFilter(e){const s=(0,f.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(s)}async _eth_newFilter(e){const s=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(s)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){const s=(0,f.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(s)}_eth_getFilterLogs(e){const s=(0,f.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(s)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(e=>(e.setAccountsCallback((s,n)=>this._setAddresses(s,n)),e.setChainCallback((s,n)=>{this.updateProviderInfo(n,parseInt(s,10))}),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e))}}exports.CoinbaseWalletProvider=Sn;const In=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),pt=de(In);var We={},we={},vt={},B={};Object.defineProperty(B,"__esModule",{value:!0});B.errorValues=B.standardErrorCodes=void 0;B.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};B.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};var Fe={},He={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.getErrorCode=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=B,s="Unspecified error message.";t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function n(l,g=s){if(l&&Number.isInteger(l)){const _=l.toString();if(h(e.errorValues,_))return e.errorValues[_].message;if(c(l))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return g}t.getMessageFromCode=n;function r(l){if(!Number.isInteger(l))return!1;const g=l.toString();return!!(e.errorValues[g]||c(l))}t.isValidCode=r;function a(l){var g;if(typeof l=="number")return l;if(o(l))return(g=l.code)!==null&&g!==void 0?g:l.errorCode}t.getErrorCode=a;function o(l){return typeof l=="object"&&l!==null&&(typeof l.code=="number"||typeof l.errorCode=="number")}function i(l,{shouldIncludeStack:g=!1}={}){const _={};if(l&&typeof l=="object"&&!Array.isArray(l)&&h(l,"code")&&r(l.code)){const E=l;_.code=E.code,E.message&&typeof E.message=="string"?(_.message=E.message,h(E,"data")&&(_.data=E.data)):(_.message=n(_.code),_.data={originalError:d(l)})}else _.code=e.standardErrorCodes.rpc.internal,_.message=u(l,"message")?l.message:s,_.data={originalError:d(l)};return g&&(_.stack=u(l,"stack")?l.stack:void 0),_}t.serialize=i;function c(l){return l>=-32099&&l<=-32e3}function d(l){return l&&typeof l=="object"&&!Array.isArray(l)?Object.assign({},l):l}function h(l,g){return Object.prototype.hasOwnProperty.call(l,g)}function u(l,g){return typeof l=="object"&&l!==null&&g in l&&typeof l[g]=="string"}})(He);Object.defineProperty(Fe,"__esModule",{value:!0});Fe.standardErrors=void 0;const S=B,ws=He;Fe.standardErrors={rpc:{parse:t=>N(S.standardErrorCodes.rpc.parse,t),invalidRequest:t=>N(S.standardErrorCodes.rpc.invalidRequest,t),invalidParams:t=>N(S.standardErrorCodes.rpc.invalidParams,t),methodNotFound:t=>N(S.standardErrorCodes.rpc.methodNotFound,t),internal:t=>N(S.standardErrorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return N(e,t)},invalidInput:t=>N(S.standardErrorCodes.rpc.invalidInput,t),resourceNotFound:t=>N(S.standardErrorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>N(S.standardErrorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>N(S.standardErrorCodes.rpc.transactionRejected,t),methodNotSupported:t=>N(S.standardErrorCodes.rpc.methodNotSupported,t),limitExceeded:t=>N(S.standardErrorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>te(S.standardErrorCodes.provider.userRejectedRequest,t),unauthorized:t=>te(S.standardErrorCodes.provider.unauthorized,t),unsupportedMethod:t=>te(S.standardErrorCodes.provider.unsupportedMethod,t),disconnected:t=>te(S.standardErrorCodes.provider.disconnected,t),chainDisconnected:t=>te(S.standardErrorCodes.provider.chainDisconnected,t),unsupportedChain:t=>te(S.standardErrorCodes.provider.unsupportedChain,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:s,data:n}=t;if(!s||typeof s!="string")throw new Error('"message" must be a nonempty string');return new ys(e,s,n)}}};function N(t,e){const[s,n]=ms(e);return new vs(t,s||(0,ws.getMessageFromCode)(t),n)}function te(t,e){const[s,n]=ms(e);return new ys(t,s||(0,ws.getMessageFromCode)(t),n)}function ms(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:s}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,s]}}return[]}class vs extends Error{constructor(e,s,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!s||typeof s!="string")throw new Error('"message" must be a nonempty string.');super(s),this.code=e,n!==void 0&&(this.data=n)}}class ys extends vs{constructor(e,s,n){if(!Mn(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,s,n)}}function Mn(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}var $e={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.isErrorResponse=void 0;function An(t){return t.errorMessage!==void 0}me.isErrorResponse=An;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.LIB_VERSION=void 0;le.LIB_VERSION="3.9.3";Object.defineProperty($e,"__esModule",{value:!0});$e.serializeError=void 0;const Rn=me,Nn=le,Ln=B,Pn=He;function Dn(t,e){const s=(0,Pn.serialize)(On(t),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");n.searchParams.set("version",Nn.LIB_VERSION),n.searchParams.set("code",s.code.toString());const r=Tn(s.data,e);return r&&n.searchParams.set("method",r),n.searchParams.set("message",s.message),Object.assign(Object.assign({},s),{docUrl:n.href})}$e.serializeError=Dn;function On(t){return typeof t=="string"?{message:t,code:Ln.standardErrorCodes.rpc.internal}:(0,Rn.isErrorResponse)(t)?Object.assign(Object.assign({},t),{message:t.errorMessage,code:t.errorCode,data:{method:t.method}}):t}function Tn(t,e){const s=t==null?void 0:t.method;if(s)return s;if(e!==void 0){if(typeof e=="string")return e;if(Array.isArray(e)){if(e.length>0)return e[0].method}else return e.method}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.standardErrors=t.standardErrorCodes=t.serializeError=t.getMessageFromCode=t.getErrorCode=void 0;const e=B;Object.defineProperty(t,"standardErrorCodes",{enumerable:!0,get:function(){return e.standardErrorCodes}});const s=Fe;Object.defineProperty(t,"standardErrors",{enumerable:!0,get:function(){return s.standardErrors}});const n=$e;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}});const r=He;Object.defineProperty(t,"getErrorCode",{enumerable:!0,get:function(){return r.getErrorCode}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}})})(vt);var I={};Object.defineProperty(I,"__esModule",{value:!0});I.ProviderType=I.RegExpString=I.IntNumber=I.BigIntString=I.AddressString=I.HexString=I.OpaqueType=void 0;function ve(){return t=>t}I.OpaqueType=ve;I.HexString=ve();I.AddressString=ve();I.BigIntString=ve();function jn(t){return Math.floor(t)}I.IntNumber=jn;I.RegExpString=ve();var Ft;(function(t){t.CoinbaseWallet="CoinbaseWallet",t.MetaMask="MetaMask",t.Unselected=""})(Ft||(I.ProviderType=Ft={}));var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.EVENTS=void 0;ye.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",METHOD_NOT_IMPLEMENTED:"walletlink_sdk.method_not_implemented",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var D={};Object.defineProperty(D,"__esModule",{value:!0});D.RelayAbstract=D.APP_VERSION_KEY=D.LOCAL_STORAGE_ADDRESSES_KEY=D.WALLET_USER_NAME_KEY=void 0;const Ht=vt;D.WALLET_USER_NAME_KEY="walletUsername";D.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";D.APP_VERSION_KEY="AppVersion";class Bn{async makeEthereumJSONRPCRequest(e,s){if(!s)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(s,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(n=>{if(!n)throw Ht.standardErrors.rpc.parse({});const r=n,{error:a}=r;if(a)throw(0,Ht.serializeError)(a,e.method);return r})}}D.RelayAbstract=Bn;var Ee={},Es={exports:{}},_t={exports:{}};typeof Object.create=="function"?_t.exports=function(e,s){s&&(e.super_=s,e.prototype=Object.create(s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:_t.exports=function(e,s){if(s){e.super_=s;var n=function(){};n.prototype=s.prototype,e.prototype=new n,e.prototype.constructor=e}};var he=_t.exports,wt={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var s=ae,n=s.Buffer;function r(o,i){for(var c in o)i[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=s:(r(s,e),e.Buffer=a);function a(o,i,c){return n(o,i,c)}a.prototype=Object.create(n.prototype),r(n,a),a.from=function(o,i,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,i,c)},a.alloc=function(o,i,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var d=n(o);return i!==void 0?typeof c=="string"?d.fill(i,c):d.fill(i):d.fill(0),d},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(o)}})(wt,wt.exports);var J=wt.exports,ks=J.Buffer;function Ve(t,e){this._block=ks.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Ve.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=ks.from(t,e));for(var s=this._block,n=this._blockSize,r=t.length,a=this._len,o=0;o<r;){for(var i=a%n,c=Math.min(r-o,n-i),d=0;d<c;d++)s[i+d]=t[o+d];a+=c,o+=c,a%n===0&&this._update(s)}return this._len+=r,this};Ve.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var n=(s&4294967295)>>>0,r=(s-n)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return t?a.toString(t):a};Ve.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var ue=Ve,Un=he,Cs=ue,Wn=J.Buffer,Fn=[1518500249,1859775393,-1894007588,-899497514],Hn=new Array(80);function ke(){this.init(),this._w=Hn,Cs.call(this,64,56)}Un(ke,Cs);ke.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function $n(t){return t<<5|t>>>27}function Vn(t){return t<<30|t>>>2}function qn(t,e,s,n){return t===0?e&s|~e&n:t===2?e&s|e&n|s&n:e^s^n}ke.prototype._update=function(t){for(var e=this._w,s=this._a|0,n=this._b|0,r=this._c|0,a=this._d|0,o=this._e|0,i=0;i<16;++i)e[i]=t.readInt32BE(i*4);for(;i<80;++i)e[i]=e[i-3]^e[i-8]^e[i-14]^e[i-16];for(var c=0;c<80;++c){var d=~~(c/20),h=$n(s)+qn(d,n,r,a)+o+e[c]+Fn[d]|0;o=a,a=r,r=Vn(n),n=s,s=h}this._a=s+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0};ke.prototype._hash=function(){var t=Wn.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var zn=ke,Zn=he,xs=ue,Gn=J.Buffer,Qn=[1518500249,1859775393,-1894007588,-899497514],Kn=new Array(80);function Ce(){this.init(),this._w=Kn,xs.call(this,64,56)}Zn(Ce,xs);Ce.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Yn(t){return t<<1|t>>>31}function Jn(t){return t<<5|t>>>27}function Xn(t){return t<<30|t>>>2}function er(t,e,s,n){return t===0?e&s|~e&n:t===2?e&s|e&n|s&n:e^s^n}Ce.prototype._update=function(t){for(var e=this._w,s=this._a|0,n=this._b|0,r=this._c|0,a=this._d|0,o=this._e|0,i=0;i<16;++i)e[i]=t.readInt32BE(i*4);for(;i<80;++i)e[i]=Yn(e[i-3]^e[i-8]^e[i-14]^e[i-16]);for(var c=0;c<80;++c){var d=~~(c/20),h=Jn(s)+er(d,n,r,a)+o+e[c]+Qn[d]|0;o=a,a=r,r=Xn(n),n=s,s=h}this._a=s+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0};Ce.prototype._hash=function(){var t=Gn.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var tr=Ce,sr=he,Ss=ue,nr=J.Buffer,rr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ir=new Array(64);function xe(){this.init(),this._w=ir,Ss.call(this,64,56)}sr(xe,Ss);xe.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ar(t,e,s){return s^t&(e^s)}function or(t,e,s){return t&e|s&(t|e)}function cr(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function dr(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function lr(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function hr(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}xe.prototype._update=function(t){for(var e=this._w,s=this._a|0,n=this._b|0,r=this._c|0,a=this._d|0,o=this._e|0,i=this._f|0,c=this._g|0,d=this._h|0,h=0;h<16;++h)e[h]=t.readInt32BE(h*4);for(;h<64;++h)e[h]=hr(e[h-2])+e[h-7]+lr(e[h-15])+e[h-16]|0;for(var u=0;u<64;++u){var l=d+dr(o)+ar(o,i,c)+rr[u]+e[u]|0,g=cr(s)+or(s,n,r)|0;d=c,c=i,i=o,o=a+l|0,a=r,r=n,n=s,s=l+g|0}this._a=s+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0,this._f=i+this._f|0,this._g=c+this._g|0,this._h=d+this._h|0};xe.prototype._hash=function(){var t=nr.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Is=xe,ur=he,fr=Is,gr=ue,br=J.Buffer,pr=new Array(64);function qe(){this.init(),this._w=pr,gr.call(this,64,56)}ur(qe,fr);qe.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};qe.prototype._hash=function(){var t=br.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var _r=qe,wr=he,Ms=ue,mr=J.Buffer,$t=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],vr=new Array(160);function Se(){this.init(),this._w=vr,Ms.call(this,128,112)}wr(Se,Ms);Se.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Vt(t,e,s){return s^t&(e^s)}function qt(t,e,s){return t&e|s&(t|e)}function zt(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function Zt(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function yr(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Er(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function kr(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Cr(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function k(t,e){return t>>>0<e>>>0?1:0}Se.prototype._update=function(t){for(var e=this._w,s=this._ah|0,n=this._bh|0,r=this._ch|0,a=this._dh|0,o=this._eh|0,i=this._fh|0,c=this._gh|0,d=this._hh|0,h=this._al|0,u=this._bl|0,l=this._cl|0,g=this._dl|0,_=this._el|0,E=this._fl|0,m=this._gl|0,U=this._hl|0,v=0;v<32;v+=2)e[v]=t.readInt32BE(v*4),e[v+1]=t.readInt32BE(v*4+4);for(;v<160;v+=2){var x=e[v-30],$=e[v-15*2+1],Bs=yr(x,$),Nt=Er($,x);x=e[v-2*2],$=e[v-2*2+1];var Us=kr(x,$),Lt=Cr($,x),Ws=e[v-7*2],Fs=e[v-7*2+1],Hs=e[v-16*2],Pt=e[v-16*2+1],P=Nt+Fs|0,V=Bs+Ws+k(P,Nt)|0;P=P+Lt|0,V=V+Us+k(P,Lt)|0,P=P+Pt|0,V=V+Hs+k(P,Pt)|0,e[v]=V,e[v+1]=P}for(var ee=0;ee<160;ee+=2){V=e[ee],P=e[ee+1];var $s=qt(s,n,r),Vs=qt(h,u,l),qs=zt(s,h),Dt=zt(h,s),zs=Zt(o,_),Zs=Zt(_,o),Gs=$t[ee],Ot=$t[ee+1],Qs=Vt(o,i,c),Tt=Vt(_,E,m),M=U+Zs|0,W=d+zs+k(M,U)|0;M=M+Tt|0,W=W+Qs+k(M,Tt)|0,M=M+Ot|0,W=W+Gs+k(M,Ot)|0,M=M+P|0,W=W+V+k(M,P)|0;var jt=Dt+Vs|0,Ks=qs+$s+k(jt,Dt)|0;d=c,U=m,c=i,m=E,i=o,E=_,_=g+M|0,o=a+W+k(_,g)|0,a=r,g=l,r=n,l=u,n=s,u=h,h=M+jt|0,s=W+Ks+k(h,M)|0}this._al=this._al+h|0,this._bl=this._bl+u|0,this._cl=this._cl+l|0,this._dl=this._dl+g|0,this._el=this._el+_|0,this._fl=this._fl+E|0,this._gl=this._gl+m|0,this._hl=this._hl+U|0,this._ah=this._ah+s+k(this._al,h)|0,this._bh=this._bh+n+k(this._bl,u)|0,this._ch=this._ch+r+k(this._cl,l)|0,this._dh=this._dh+a+k(this._dl,g)|0,this._eh=this._eh+o+k(this._el,_)|0,this._fh=this._fh+i+k(this._fl,E)|0,this._gh=this._gh+c+k(this._gl,m)|0,this._hh=this._hh+d+k(this._hl,U)|0};Se.prototype._hash=function(){var t=mr.allocUnsafe(64);function e(s,n,r){t.writeInt32BE(s,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var As=Se,xr=he,Sr=As,Ir=ue,Mr=J.Buffer,Ar=new Array(160);function ze(){this.init(),this._w=Ar,Ir.call(this,128,112)}xr(ze,Sr);ze.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};ze.prototype._hash=function(){var t=Mr.allocUnsafe(48);function e(s,n,r){t.writeInt32BE(s,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var Rr=ze,X=Es.exports=function(e){e=e.toLowerCase();var s=X[e];if(!s)throw new Error(e+" is not supported (we accept pull requests)");return new s};X.sha=zn;X.sha1=tr;X.sha224=_r;X.sha256=Is;X.sha384=Rr;X.sha512=As;var Nr=Es.exports;Object.defineProperty(Ee,"__esModule",{value:!0});Ee.Session=void 0;const Gt=Nr,Qt=Y,Kt="session:id",Yt="session:secret",Jt="session:linked";class yt{constructor(e,s,n,r){this._storage=e,this._id=s||(0,Qt.randomBytesHex)(16),this._secret=n||(0,Qt.randomBytesHex)(32),this._key=new Gt.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!r}static load(e){const s=e.getItem(Kt),n=e.getItem(Jt),r=e.getItem(Yt);return s&&r?new yt(e,s,r,n==="1"):null}static hash(e){return new Gt.sha256().update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(Kt,this._id),this._storage.setItem(Yt,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(Jt,this._linked?"1":"0")}}Ee.Session=yt;var Ze={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.Cipher=void 0;const Le=Y;class Lr{constructor(e){this.secret=e}async encrypt(e){const s=this.secret;if(s.length!==64)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.importKey("raw",(0,Le.hexStringToUint8Array)(s),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=new TextEncoder,o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},r,a.encode(e)),i=16,c=o.slice(o.byteLength-i),d=o.slice(0,o.byteLength-i),h=new Uint8Array(c),u=new Uint8Array(d),l=new Uint8Array([...n,...h,...u]);return(0,Le.uint8ArrayToHex)(l)}async decrypt(e){const s=this.secret;if(s.length!==64)throw Error("secret must be 256 bits");return new Promise((n,r)=>{(async function(){const a=await crypto.subtle.importKey("raw",(0,Le.hexStringToUint8Array)(s),{name:"aes-gcm"},!1,["encrypt","decrypt"]),o=(0,Le.hexStringToUint8Array)(e),i=o.slice(0,12),c=o.slice(12,28),d=o.slice(28),h=new Uint8Array([...d,...c]),u={name:"AES-GCM",iv:new Uint8Array(i)};try{const l=await window.crypto.subtle.decrypt(u,a,h),g=new TextDecoder;n(g.decode(l))}catch(l){r(l)}})()})}}Ge.Cipher=Lr;var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.WalletLinkHTTP=void 0;class Pr{constructor(e,s,n){this.linkAPIUrl=e,this.sessionId=s;const r=`${s}:${n}`;this.auth=`Basic ${btoa(r)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(s=>fetch(`${this.linkAPIUrl}/events/${s.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(s=>console.error("Unabled to mark event as failed:",s))}async fetchUnseenEvents(){var e;const s=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(s.ok){const{events:n,error:r}=await s.json();if(r)throw new Error(`Check unseen events failed: ${r}`);const a=(e=n==null?void 0:n.filter(o=>o.event==="Web3Response").map(o=>({type:"Event",sessionId:this.sessionId,eventId:o.id,event:o.event,data:o.data})))!==null&&e!==void 0?e:[];return this.markUnseenEventsAsSeen(a),a}throw new Error(`Check unseen events failed: ${s.status}`)}}Qe.WalletLinkHTTP=Pr;var oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.WalletLinkWebSocket=oe.ConnectionState=void 0;var ie;(function(t){t[t.DISCONNECTED=0]="DISCONNECTED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED"})(ie||(oe.ConnectionState=ie={}));class Dr{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,s=WebSocket){this.WebSocketClass=s,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((e,s)=>{var n;let r;try{this.webSocket=r=new this.WebSocketClass(this.url)}catch(a){s(a);return}(n=this.connectionStateListener)===null||n===void 0||n.call(this,ie.CONNECTING),r.onclose=a=>{var o;this.clearWebSocket(),s(new Error(`websocket error ${a.code}: ${a.reason}`)),(o=this.connectionStateListener)===null||o===void 0||o.call(this,ie.DISCONNECTED)},r.onopen=a=>{var o;e(),(o=this.connectionStateListener)===null||o===void 0||o.call(this,ie.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(c=>this.sendData(c)),this.pendingData=[])},r.onmessage=a=>{var o,i;if(a.data==="h")(o=this.incomingDataListener)===null||o===void 0||o.call(this,{type:"Heartbeat"});else try{const c=JSON.parse(a.data);(i=this.incomingDataListener)===null||i===void 0||i.call(this,c)}catch{}}})}disconnect(){var e;const{webSocket:s}=this;if(s){this.clearWebSocket(),(e=this.connectionStateListener)===null||e===void 0||e.call(this,ie.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{s.close()}catch{}}}sendData(e){const{webSocket:s}=this;if(!s){this.pendingData.push(e),this.connect();return}s.send(e)}clearWebSocket(){const{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}oe.WalletLinkWebSocket=Dr;Object.defineProperty(Ze,"__esModule",{value:!0});Ze.WalletLinkConnection=void 0;const se=I,Or=Ge,O=ye,Xt=D,ne=Ee,Tr=Qe,Pe=oe,es=1e4,jr=6e4;class Br{constructor({session:e,linkAPIUrl:s,listener:n,diagnostic:r,WebSocketClass:a=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,se.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=i=>{if(!i)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",d=>i.JsonRpcUrl&&this.handleChainUpdated(d,i.JsonRpcUrl)]]).forEach((d,h)=>{const u=i[h];u!==void 0&&d(u)})},this.handleDestroyed=i=>{var c,d;i==="1"&&((c=this.listener)===null||c===void 0||c.resetAndReload(),(d=this.diagnostic)===null||d===void 0||d.log(O.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:this.isDestroyed,sessionIdHash:ne.Session.hash(this.session.id)}))},this.handleAccountUpdated=async i=>{var c,d;try{const h=await this.cipher.decrypt(i);(c=this.listener)===null||c===void 0||c.accountUpdated(h)}catch{(d=this.diagnostic)===null||d===void 0||d.log(O.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}},this.handleMetadataUpdated=async(i,c)=>{var d,h;try{const u=await this.cipher.decrypt(c);(d=this.listener)===null||d===void 0||d.metadataUpdated(i,u)}catch{(h=this.diagnostic)===null||h===void 0||h.log(O.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:i})}},this.handleWalletUsernameUpdated=async i=>{this.handleMetadataUpdated(Xt.WALLET_USER_NAME_KEY,i)},this.handleAppVersionUpdated=async i=>{this.handleMetadataUpdated(Xt.APP_VERSION_KEY,i)},this.handleChainUpdated=async(i,c)=>{var d,h;try{const u=await this.cipher.decrypt(i),l=await this.cipher.decrypt(c);(d=this.listener)===null||d===void 0||d.chainUpdated(u,l)}catch{(h=this.diagnostic)===null||h===void 0||h.log(O.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}},this.session=e,this.cipher=new Or.Cipher(e.secret),this.diagnostic=r,this.listener=n;const o=new Pe.WalletLinkWebSocket(`${s}/rpc`,a);o.setConnectionStateListener(async i=>{var c;(c=this.diagnostic)===null||c===void 0||c.log(O.EVENTS.CONNECTED_STATE_CHANGE,{state:i,sessionIdHash:ne.Session.hash(e.id)});let d=!1;switch(i){case Pe.ConnectionState.DISCONNECTED:if(!this.destroyed){const h=async()=>{await new Promise(u=>setTimeout(u,5e3)),this.destroyed||o.connect().catch(()=>{h()})};h()}break;case Pe.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),d=!0}catch{}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},es),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case Pe.ConnectionState.CONNECTING:break}this.connected!==d&&(this.connected=d)}),o.setIncomingDataListener(i=>{var c,d,h;switch(i.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const u=i.type==="IsLinkedOK"?i.linked:void 0;(c=this.diagnostic)===null||c===void 0||c.log(O.EVENTS.LINKED,{sessionIdHash:ne.Session.hash(e.id),linked:u,type:i.type,onlineGuests:i.onlineGuests}),this.linked=u||i.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{(d=this.diagnostic)===null||d===void 0||d.log(O.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:ne.Session.hash(e.id),metadata_keys:i&&i.metadata?Object.keys(i.metadata):void 0}),this.handleSessionMetadataUpdated(i.metadata);break}case"Event":{this.handleIncomingEvent(i);break}}i.id!==void 0&&((h=this.requestResolutions.get(i.id))===null||h===void 0||h(i))}),this.ws=o,this.http=new Tr.WalletLinkHTTP(s,e.id,e.key)}connect(){var e;if(this.destroyed)throw new Error("instance is destroyed");(e=this.diagnostic)===null||e===void 0||e.log(O.EVENTS.STARTED_CONNECTING,{sessionIdHash:ne.Session.hash(this.session.id)}),this.ws.connect()}destroy(){var e;this.destroyed=!0,this.ws.disconnect(),(e=this.diagnostic)===null||e===void 0||e.log(O.EVENTS.DISCONNECTED,{sessionIdHash:ne.Session.hash(this.session.id)}),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(e){var s,n;this._connected=e,e&&((s=this.onceConnected)===null||s===void 0||s.call(this)),(n=this.listener)===null||n===void 0||n.connectedUpdated(e)}setOnceConnected(e){return new Promise(s=>{this.connected?e().then(s):this.onceConnected=()=>{e().then(s),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(e){var s,n;this._linked=e,e&&((s=this.onceLinked)===null||s===void 0||s.call(this)),(n=this.listener)===null||n===void 0||n.linkedUpdated(e)}setOnceLinked(e){return new Promise(s=>{this.linked?e().then(s):this.onceLinked=()=>{e().then(s),this.onceLinked=void 0}})}async handleIncomingEvent(e){var s,n;if(!(e.type!=="Event"||e.event!=="Web3Response"))try{const r=await this.cipher.decrypt(e.data),a=JSON.parse(r);if(a.type!=="WEB3_RESPONSE")return;(s=this.listener)===null||s===void 0||s.handleWeb3ResponseMessage(a)}catch{(n=this.diagnostic)===null||n===void 0||n.log(O.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(s=>this.handleIncomingEvent(s))}async setSessionMetadata(e,s){const n={type:"SetSessionConfig",id:(0,se.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[e]:s}};return this.setOnceConnected(async()=>{const r=await this.makeRequest(n);if(r.type==="Fail")throw new Error(r.error||"failed to set session metadata")})}async publishEvent(e,s,n=!1){const r=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},s),{origin:location.origin,relaySource:window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),a={type:"PublishEvent",id:(0,se.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:e,data:r,callWebhook:n};return this.setOnceLinked(async()=>{const o=await this.makeRequest(a);if(o.type==="Fail")throw new Error(o.error||"failed to publish event");return o.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>es*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(e,s=jr){const n=e.id;this.sendData(e);let r;return Promise.race([new Promise((a,o)=>{r=window.setTimeout(()=>{o(new Error(`request ${n} timed out`))},s)}),new Promise(a=>{this.requestResolutions.set(n,o=>{clearTimeout(r),a(o),this.requestResolutions.delete(n)})})])}async authenticate(){const e={type:"HostSession",id:(0,se.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},s=await this.makeRequest(e);if(s.type==="Fail")throw new Error(s.error||"failed to authentcate")}sendIsLinked(){const e={type:"IsLinked",id:(0,se.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}sendGetSessionConfig(){const e={type:"GetSessionConfig",id:(0,se.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}}Ze.WalletLinkConnection=Br;var Ie={},Me={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var Ur=C&&C.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Me,"__esModule",{value:!0});Me.injectCssReset=void 0;const Wr=Ur(Et);function Fr(){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(Wr.default)),document.documentElement.appendChild(t)}Me.injectCssReset=Fr;var Ke={};const R=de(Js);var Ye={};function Rs(t){var e,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(s=Rs(t[e]))&&(n&&(n+=" "),n+=s);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function ts(){for(var t,e,s=0,n="";s<arguments.length;)(t=arguments[s++])&&(e=Rs(t))&&(n&&(n+=" "),n+=e);return n}const Hr=Object.freeze(Object.defineProperty({__proto__:null,clsx:ts,default:ts},Symbol.toStringTag,{value:"Module"})),Ae=de(Hr),kt=de(Xs);var ce={},Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.CloseIcon=void 0;const ss=R;function $r(t){return(0,ss.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),(0,ss.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}Je.CloseIcon=$r;var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.CoinbaseWalletRound=void 0;const De=R;function Vr(t){return(0,De.h)("svg",Object.assign({width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),(0,De.h)("circle",{cx:"14",cy:"14",r:"14",fill:"#0052FF"}),(0,De.h)("path",{d:"M23.8521 14.0003C23.8521 19.455 19.455 23.8521 14.0003 23.8521C8.54559 23.8521 4.14844 19.455 4.14844 14.0003C4.14844 8.54559 8.54559 4.14844 14.0003 4.14844C19.455 4.14844 23.8521 8.54559 23.8521 14.0003Z",fill:"white"}),(0,De.h)("path",{d:"M11.1855 12.5042C11.1855 12.0477 11.1855 11.7942 11.2835 11.642C11.3814 11.4899 11.4793 11.3377 11.6261 11.287C11.8219 11.1855 12.0178 11.1855 12.5073 11.1855H15.4934C15.983 11.1855 16.1788 11.1855 16.3746 11.287C16.5215 11.3884 16.6683 11.4899 16.7173 11.642C16.8152 11.8449 16.8152 12.0477 16.8152 12.5042V15.4965C16.8152 15.953 16.8152 16.2066 16.7173 16.3587C16.6194 16.5109 16.5215 16.663 16.3746 16.7137C16.1788 16.8152 15.983 16.8152 15.4934 16.8152H12.5073C12.0178 16.8152 11.8219 16.8152 11.6261 16.7137C11.4793 16.6123 11.3324 16.5109 11.2835 16.3587C11.1855 16.1558 11.1855 15.953 11.1855 15.4965V12.5042Z",fill:"#0052FF"}))}Xe.CoinbaseWalletRound=Vr;var et={};Object.defineProperty(et,"__esModule",{value:!0});et.QRCodeIcon=void 0;const ge=R;function qr(t){return(0,ge.h)("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t),(0,ge.h)("path",{d:"M3 3V8.99939L5 8.99996V5H9V3H3Z"}),(0,ge.h)("path",{d:"M15 21L21 21V15.0006L19 15V19L15 19V21Z"}),(0,ge.h)("path",{d:"M21 9H19V5H15.0006L15 3H21V9Z"}),(0,ge.h)("path",{d:"M3 15V21H8.99939L8.99996 19H5L5 15H3Z"}))}et.QRCodeIcon=qr;var zr=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});exports.QRCode=void 0;const Zr=require("preact"),ns=require("preact/hooks"),Gr=zr(require("../../../../vendor-js/qrcode-svg")),Qr=t=>{const[e,s]=(0,ns.useState)("");return(0,ns.useEffect)(()=>{var n,r;const a=new Gr.default({content:t.content,background:t.bgColor||"#ffffff",color:t.fgColor||"#000000",container:"svg",ecl:"M",width:(n=t.width)!==null&&n!==void 0?n:256,height:(r=t.height)!==null&&r!==void 0?r:256,padding:0,image:t.image}),o=ae.Buffer.from(a.svg(),"utf8").toString("base64");s(`data:image/svg+xml;base64,${o}`)},[t.bgColor,t.content,t.fgColor,t.height,t.image,t.width]),e?(0,Zr.h)("img",{src:e,alt:"QR Code"}):null};exports.QRCode=Qr;const Kr=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Yr=de(Kr);var tt={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var Jr=C&&C.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tt,"__esModule",{value:!0});tt.Spinner=void 0;const Oe=R,Xr=Jr(Ct),ei=t=>{var e;const s=(e=t.size)!==null&&e!==void 0?e:64,n=t.color||"#000";return(0,Oe.h)("div",{class:"-cbwsdk-spinner"},(0,Oe.h)("style",null,Xr.default),(0,Oe.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:s,height:s}},(0,Oe.h)("circle",{style:{cx:50,cy:50,r:45,stroke:n}})))};tt.Spinner=ei;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer;border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var Ns=C&&C.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ce,"__esModule",{value:!0});ce.CoinbaseWalletSteps=ce.ConnectContent=void 0;const Q=Ns(Ae),p=R,ti=Y,si=le,ni=Je,ri=Xe,ii=et,ai=Yr,oi=tt,ci=Ns(xt),lt={title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",steps:Ls},di=t=>t==="light"?"#FFFFFF":"#0A0B0D";function li(t){const{theme:e}=t,s=(0,ti.createQrUrl)(t.sessionId,t.sessionSecret,t.linkAPIUrl,t.isParentConnection,t.version,t.chainId),n=lt.steps;return(0,p.h)("div",{"data-testid":"connect-content",className:(0,Q.default)("-cbwsdk-connect-content",e)},(0,p.h)("style",null,ci.default),(0,p.h)("div",{className:"-cbwsdk-connect-content-header"},(0,p.h)("h2",{className:(0,Q.default)("-cbwsdk-connect-content-heading",e)},"Scan to connect with our mobile app"),t.onCancel&&(0,p.h)("button",{type:"button",className:"-cbwsdk-cancel-button",onClick:t.onCancel},(0,p.h)(ni.CloseIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,p.h)("div",{className:"-cbwsdk-connect-content-layout"},(0,p.h)("div",{className:"-cbwsdk-connect-content-column-left"},(0,p.h)(hi,{title:lt.title,description:lt.description,theme:e})),(0,p.h)("div",{className:"-cbwsdk-connect-content-column-right"},(0,p.h)("div",{className:"-cbwsdk-connect-content-qr-wrapper"},(0,p.h)(ai.QRCode,{content:s,width:200,height:200,fgColor:"#000",bgColor:"transparent"}),(0,p.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:si.LIB_VERSION}),(0,p.h)("input",{type:"hidden",value:s})),(0,p.h)(n,{theme:e}),!t.isConnected&&(0,p.h)("div",{"data-testid":"connecting-spinner",className:(0,Q.default)("-cbwsdk-connect-content-qr-connecting",e)},(0,p.h)(oi.Spinner,{size:36,color:e==="dark"?"#FFF":"#000"}),(0,p.h)("p",null,"Connecting...")))))}ce.ConnectContent=li;function hi({title:t,description:e,theme:s}){return(0,p.h)("div",{className:(0,Q.default)("-cbwsdk-connect-item",s)},(0,p.h)("div",null,(0,p.h)(ri.CoinbaseWalletRound,null)),(0,p.h)("div",{className:"-cbwsdk-connect-item-copy-wrapper"},(0,p.h)("h3",{className:"-cbwsdk-connect-item-title"},t),(0,p.h)("p",{className:"-cbwsdk-connect-item-description"},e)))}function Ls({theme:t}){return(0,p.h)("ol",{className:"-cbwsdk-wallet-steps"},(0,p.h)("li",{className:(0,Q.default)("-cbwsdk-wallet-steps-item",t)},(0,p.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,p.h)("li",{className:(0,Q.default)("-cbwsdk-wallet-steps-item",t)},(0,p.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},(0,p.h)("span",null,"Tap ",(0,p.h)("strong",null,"Scan")," "),(0,p.h)("span",{className:(0,Q.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",t)},(0,p.h)(ii.QRCodeIcon,{fill:di(t)})))))}ce.CoinbaseWalletSteps=Ls;var st={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.ArrowLeftIcon=void 0;const rs=R;function ui(t){return(0,rs.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},t),(0,rs.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}nt.ArrowLeftIcon=ui;var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.LaptopIcon=void 0;const ht=R;function fi(t){return(0,ht.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,ht.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,ht.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}rt.LaptopIcon=fi;var it={};Object.defineProperty(it,"__esModule",{value:!0});it.SafeIcon=void 0;const is=R;function gi(t){return(0,is.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},t),(0,is.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}it.SafeIcon=gi;var St={};Object.defineProperty(St,"__esModule",{value:!0});St.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var Ps=C&&C.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(st,"__esModule",{value:!0});st.TryExtensionContent=void 0;const q=Ps(Ae),y=R,ut=kt,bi=nt,pi=rt,_i=it,wi=Ps(St);function mi({theme:t}){const[e,s]=(0,ut.useState)(!1),n=(0,ut.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),r=(0,ut.useCallback)(()=>{e?window.location.reload():(n(),s(!0))},[n,e]);return(0,y.h)("div",{class:(0,q.default)("-cbwsdk-try-extension",t)},(0,y.h)("style",null,wi.default),(0,y.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,y.h)("h3",{class:(0,q.default)("-cbwsdk-try-extension-heading",t)},"Or try the Coinbase Wallet browser extension"),(0,y.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,y.h)("button",{class:(0,q.default)("-cbwsdk-try-extension-cta",t),onClick:r},e?"Refresh":"Install"),(0,y.h)("div",null,!e&&(0,y.h)(bi.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:t==="light"?"#0052FF":"#588AF5"})))),(0,y.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,y.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,y.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,y.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,y.h)("span",{class:(0,q.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,y.h)(pi.LaptopIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,y.h)("div",{class:(0,q.default)("-cbwsdk-try-extension-list-item-copy",t)},"Connect with dapps with just one click on your desktop browser")),(0,y.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,y.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,y.h)("span",{class:(0,q.default)("-cbwsdk-try-extension-list-item-icon",t)},(0,y.h)(_i.SafeIcon,{fill:t==="light"?"#0A0B0D":"#FFFFFF"}))),(0,y.h)("div",{class:(0,q.default)("-cbwsdk-try-extension-list-item-copy",t)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}st.TryExtensionContent=mi;var It={};Object.defineProperty(It,"__esModule",{value:!0});It.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var Ds=C&&C.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.ConnectDialog=void 0;const ft=Ds(Ae),z=R,gt=kt,vi=ce,yi=st,Ei=Ds(It),ki=t=>{const{isOpen:e,darkMode:s}=t,[n,r]=(0,gt.useState)(!e),[a,o]=(0,gt.useState)(!e);(0,gt.useEffect)(()=>{const c=[window.setTimeout(()=>{o(!e)},10)];return e?r(!1):c.push(window.setTimeout(()=>{r(!0)},360)),()=>{c.forEach(window.clearTimeout)}},[e]);const i=s?"dark":"light";return(0,z.h)("div",{class:(0,ft.default)("-cbwsdk-connect-dialog-container",n&&"-cbwsdk-connect-dialog-container-hidden")},(0,z.h)("style",null,Ei.default),(0,z.h)("div",{class:(0,ft.default)("-cbwsdk-connect-dialog-backdrop",i,a&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,z.h)("div",{class:"-cbwsdk-connect-dialog"},(0,z.h)("div",{class:(0,ft.default)("-cbwsdk-connect-dialog-box",a&&"-cbwsdk-connect-dialog-box-hidden")},t.connectDisabled?null:(0,z.h)(vi.ConnectContent,{theme:i,version:t.version,sessionId:t.sessionId,sessionSecret:t.sessionSecret,linkAPIUrl:t.linkAPIUrl,isConnected:t.isConnected,isParentConnection:t.isParentConnection,chainId:t.chainId,onCancel:t.onCancel}),(0,z.h)(yi.TryExtensionContent,{theme:i}))))};Ye.ConnectDialog=ki;Object.defineProperty(Ke,"__esModule",{value:!0});Ke.LinkFlow=void 0;const bt=R,Ci=Ye;class xi{constructor(e){this.connected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=e.darkMode,this.version=e.version,this.sessionId=e.sessionId,this.sessionSecret=e.sessionSecret,this.linkAPIUrl=e.linkAPIUrl,this.isParentConnection=e.isParentConnection}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",e.appendChild(this.root),this.render()}setConnected(e){this.connected!==e&&(this.connected=e,this.render())}setChainId(e){this.chainId!==e&&(this.chainId=e,this.render())}detach(){var e;this.root&&((0,bt.render)(null,this.root),(e=this.root.parentElement)===null||e===void 0||e.removeChild(this.root))}setConnectDisabled(e){this.connectDisabled=e}open(e){this.isOpen=!0,this.onCancel=e.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){this.root&&(0,bt.render)((0,bt.h)(Ci.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.connected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)}}Ke.LinkFlow=xi;var Mt={},At={};Object.defineProperty(At,"__esModule",{value:!0});At.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(t){var e=C&&C.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;const s=e(Ae),n=R,r=kt,a=e(At),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class c{constructor(l){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=l.darkMode}attach(l){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",l.appendChild(this.root),this.render()}presentItem(l){const g=this.nextItemKey++;return this.items.set(g,l),this.render(),()=>{this.items.delete(g),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,n.render)((0,n.h)("div",null,(0,n.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([l,g])=>(0,n.h)(t.SnackbarInstance,Object.assign({},g,{key:l}))))),this.root)}}t.Snackbar=c;const d=u=>(0,n.h)("div",{class:(0,s.default)("-cbwsdk-snackbar-container")},(0,n.h)("style",null,a.default),(0,n.h)("div",{class:"-cbwsdk-snackbar"},u.children));t.SnackbarContainer=d;const h=({autoExpand:u,message:l,menuItems:g})=>{const[_,E]=(0,r.useState)(!0),[m,U]=(0,r.useState)(u??!1);(0,r.useEffect)(()=>{const x=[window.setTimeout(()=>{E(!1)},1),window.setTimeout(()=>{U(!0)},1e4)];return()=>{x.forEach(window.clearTimeout)}});const v=()=>{U(!m)};return(0,n.h)("div",{class:(0,s.default)("-cbwsdk-snackbar-instance",_&&"-cbwsdk-snackbar-instance-hidden",m&&"-cbwsdk-snackbar-instance-expanded")},(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:v},(0,n.h)("img",{src:o,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},l),(0,n.h)("div",{class:"-gear-container"},!m&&(0,n.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,n.h)("img",{src:i,class:"-gear-icon",title:"Expand"}))),g&&g.length>0&&(0,n.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},g.map((x,$)=>(0,n.h)("div",{class:(0,s.default)("-cbwsdk-snackbar-instance-menu-item",x.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:x.onClick,key:$},(0,n.h)("svg",{width:x.svgWidth,height:x.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.h)("path",{"fill-rule":x.defaultFillRule,"clip-rule":x.defaultClipRule,d:x.path,fill:"#AAAAAA"})),(0,n.h)("span",{class:(0,s.default)("-cbwsdk-snackbar-instance-menu-item-info",x.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},x.info)))))};t.SnackbarInstance=h})(Mt);Object.defineProperty(Ie,"__esModule",{value:!0});Ie.WalletLinkRelayUI=void 0;const Si=Me,Ii=Ke,Mi=Mt;class Ai{constructor(e){this.standalone=null,this.attached=!1,this.snackbar=new Mi.Snackbar({darkMode:e.darkMode}),this.linkFlow=new Ii.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,s=document.createElement("div");s.className="-cbwsdk-css-reset",e.appendChild(s),this.linkFlow.attach(s),this.snackbar.attach(s),this.attached=!0,(0,Si.injectCssReset)()}setConnected(e){this.linkFlow.setConnected(e)}setChainId(e){this.linkFlow.setChainId(e)}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(){}watchAsset(){}switchEthereumChain(){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}showConnecting(e){let s;return e.isUnlinkedErrorState?s={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:s={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(s)}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return(e=this.standalone)!==null&&e!==void 0?e:!1}}Ie.WalletLinkRelayUI=Ai;Object.defineProperty(we,"__esModule",{value:!0});we.WalletLinkRelay=void 0;const re=vt,Ri=I,w=Y,Z=ye,as=D,F=Ee,Ni=Ze,G=me,Li=Ie;class j extends as.RelayAbstract{constructor(e){var s;super(),this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.linkedUpdated=o=>{var i;this.isLinked=o;const c=this.storage.getItem(as.LOCAL_STORAGE_ADDRESSES_KEY);if(o&&(this.session.linked=o),this.isUnlinkedErrorState=!1,c){const d=c.split(" "),h=this.storage.getItem("IsStandaloneSigning")==="true";if(d[0]!==""&&!o&&this.session.linked&&!h){this.isUnlinkedErrorState=!0;const u=this.getSessionIdHash();(i=this.diagnostic)===null||i===void 0||i.log(Z.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:u})}}},this.metadataUpdated=(o,i)=>{this.storage.setItem(o,i)},this.chainUpdated=(o,i)=>{this.chainCallbackParams.chainId===o&&this.chainCallbackParams.jsonRpcUrl===i||(this.chainCallbackParams={chainId:o,jsonRpcUrl:i},this.chainCallback&&this.chainCallback(o,i))},this.accountUpdated=o=>{this.accountsCallback&&this.accountsCallback([o]),j.accountRequestCallbackIds.size>0&&(Array.from(j.accountRequestCallbackIds.values()).forEach(i=>{const c={type:"WEB3_RESPONSE",id:i,response:{method:"requestEthereumAccounts",result:[o]}};this.invokeCallback(Object.assign(Object.assign({},c),{id:i}))}),j.accountRequestCallbackIds.clear())},this.connectedUpdated=o=>{this.ui.setConnected(o)},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;const{session:n,ui:r,connection:a}=this.subscribe();this._session=n,this.connection=a,this.relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=(s=e.reloadOnDisconnect)!==null&&s!==void 0?s:!0,this.ui=r}subscribe(){const e=F.Session.load(this.storage)||new F.Session(this.storage).save(),{linkAPIUrl:s,diagnostic:n}=this,r=new Ni.WalletLinkConnection({session:e,linkAPIUrl:s,diagnostic:n,listener:this}),{version:a,darkMode:o}=this.options,i=this.options.uiConstructor({linkAPIUrl:s,version:a,darkMode:o,session:e});return r.connect(),{session:e,ui:i,connection:r}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(e=>setTimeout(()=>e(null),1e3))]).then(()=>{var e,s;const n=this.ui.isStandalone();(e=this.diagnostic)===null||e===void 0||e.log(Z.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const r=F.Session.load(this.storage);if((r==null?void 0:r.id)===this._session.id?this.storage.clear():r&&((s=this.diagnostic)===null||s===void 0||s.log(Z.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:F.Session.hash(r.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0);const{session:a,ui:o,connection:i}=this.subscribe();this._session=a,this.connection=i,this.ui=o,n&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.options.headlessMode||this.attachUI()}).catch(e=>{var s;(s=this.diagnostic)===null||s===void 0||s.log(Z.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(e,s){this.appName=e,this.appLogoUrl=s}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,s){this.storage.setItem(e,s)}signEthereumMessage(e,s,n,r){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,w.hexStringFromBuffer)(e,!0),address:s,addPrefix:n,typedDataJson:r||null}})}ethereumAddressFromSignedMessage(e,s,n){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,w.hexStringFromBuffer)(e,!0),signature:(0,w.hexStringFromBuffer)(s,!0),addPrefix:n}})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,w.bigIntStringFromBN)(e.weiValue),data:(0,w.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,w.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,w.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,w.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,w.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,w.bigIntStringFromBN)(e.weiValue),data:(0,w.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,w.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,w.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,w.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,w.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,s){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,w.hexStringFromBuffer)(e,!0),chainId:s}})}scanQRCode(e){return this.sendRequest({method:"scanQRCode",params:{regExp:e}})}getQRCodeUrl(){return(0,w.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(e,s){return this.sendRequest({method:"generic",params:{action:s,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let s=null;const n=(0,w.randomBytesHex)(8),r=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,e.method,o),s==null||s()};return{promise:new Promise((o,i)=>{this.ui.isStandalone()||(s=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:r,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(n,c=>{if(s==null||s(),(0,G.isErrorResponse)(c))return i(new Error(c.errorMessage));o(c)}),this.ui.isStandalone()?this.sendRequestStandalone(n,e):this.publishWeb3RequestEvent(n,e)}),cancel:r}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChain=e,this.ui instanceof Li.WalletLinkRelayUI&&this.ui.setChainId(e)}publishWeb3RequestEvent(e,s){var n;const r={type:"WEB3_REQUEST",id:e,request:s},a=F.Session.load(this.storage);(n=this.diagnostic)===null||n===void 0||n.log(Z.EVENTS.WEB3_REQUEST,{eventId:r.id,method:`relay::${s.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:a?F.Session.hash(a.id):"",isSessionMismatched:((a==null?void 0:a.id)!==this._session.id).toString()}),this.publishEvent("Web3Request",r,!0).then(o=>{var i;(i=this.diagnostic)===null||i===void 0||i.log(Z.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:r.id,method:`relay::${s.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:a?F.Session.hash(a.id):"",isSessionMismatched:((a==null?void 0:a.id)!==this._session.id).toString()})}).catch(o=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r.id,response:{method:s.method,errorMessage:o.message}})})}publishWeb3RequestCanceledEvent(e){const s={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",s,!1).then()}publishEvent(e,s,n){return this.connection.publishEvent(e,s,n)}handleWeb3ResponseMessage(e){var s;const{response:n}=e;if((s=this.diagnostic)===null||s===void 0||s.log(Z.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${n.method}`,sessionIdHash:this.getSessionIdHash()}),n.method==="requestEthereumAccounts"){j.accountRequestCallbackIds.forEach(r=>this.invokeCallback(Object.assign(Object.assign({},e),{id:r}))),j.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,s,n,r){var a;const o=(a=n==null?void 0:n.message)!==null&&a!==void 0?a:(0,re.getMessageFromCode)(r);this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:{method:s,errorMessage:o,errorCode:r}})}invokeCallback(e){const s=this.relayEventManager.callbacks.get(e.id);s&&(s(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){const e={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},s=(0,w.randomBytesHex)(8),n=a=>{this.publishWeb3RequestCanceledEvent(s),this.handleErrorResponse(s,e.method,a)};return{promise:new Promise((a,o)=>{if(this.relayEventManager.callbacks.set(s,i=>{if(this.ui.hideRequestEthereumAccounts(),(0,G.isErrorResponse)(i))return o(new Error(i.errorMessage));a(i)}),this.ui.inlineAccountsResponse()){const i=c=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:s,response:{method:"requestEthereumAccounts",result:c}})};this.ui.requestEthereumAccounts({onCancel:n,onAccounts:i})}else{const i=re.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>n(i)})}j.accountRequestCallbackIds.add(s),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(s,e)}),cancel:n}}selectProvider(e){const s={method:"selectProvider",params:{providerOptions:e}},n=(0,w.randomBytesHex)(8),r=o=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,s.method,o)},a=new Promise((o,i)=>{this.relayEventManager.callbacks.set(n,h=>{if((0,G.isErrorResponse)(h))return i(new Error(h.errorMessage));o(h)});const c=h=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:Ri.ProviderType.Unselected}})},d=h=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:h}})};this.ui.selectProvider&&this.ui.selectProvider({onApprove:d,onCancel:c,providerOptions:e})});return{cancel:r,promise:a}}watchAsset(e,s,n,r,a,o){const i={method:"watchAsset",params:{type:e,options:{address:s,symbol:n,decimals:r,image:a},chainId:o}};let c=null;const d=(0,w.randomBytesHex)(8),h=l=>{this.publishWeb3RequestCanceledEvent(d),this.handleErrorResponse(d,i.method,l),c==null||c()};this.ui.inlineWatchAsset()||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:h,onResetConnection:this.resetAndReload}));const u=new Promise((l,g)=>{this.relayEventManager.callbacks.set(d,m=>{if(c==null||c(),(0,G.isErrorResponse)(m))return g(new Error(m.errorMessage));l(m)});const _=m=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"watchAsset",result:!1}})},E=()=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"watchAsset",result:!0}})};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:E,onCancel:_,type:e,address:s,symbol:n,decimals:r,image:a,chainId:o}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(d,i)});return{cancel:h,promise:u}}addEthereumChain(e,s,n,r,a,o){const i={method:"addEthereumChain",params:{chainId:e,rpcUrls:s,blockExplorerUrls:r,chainName:a,iconUrls:n,nativeCurrency:o}};let c=null;const d=(0,w.randomBytesHex)(8),h=l=>{this.publishWeb3RequestCanceledEvent(d),this.handleErrorResponse(d,i.method,l),c==null||c()};return this.ui.inlineAddEthereumChain(e)||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:h,onResetConnection:this.resetAndReload})),{promise:new Promise((l,g)=>{this.relayEventManager.callbacks.set(d,m=>{if(c==null||c(),(0,G.isErrorResponse)(m))return g(new Error(m.errorMessage));l(m)});const _=m=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"addEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},E=m=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:d,response:{method:"addEthereumChain",result:{isApproved:!0,rpcUrl:m}}})};this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:_,onApprove:E,chainId:i.params.chainId,rpcUrls:i.params.rpcUrls,blockExplorerUrls:i.params.blockExplorerUrls,chainName:i.params.chainName,iconUrls:i.params.iconUrls,nativeCurrency:i.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(e)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(d,i)}),cancel:h}}switchEthereumChain(e,s){const n={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:s})},r=(0,w.randomBytesHex)(8),a=i=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,n.method,i)};return{promise:new Promise((i,c)=>{this.relayEventManager.callbacks.set(r,u=>{if((0,G.isErrorResponse)(u)&&u.errorCode)return c(re.standardErrors.provider.custom({code:u.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if((0,G.isErrorResponse)(u))return c(new Error(u.errorMessage));i(u)});const d=u=>{var l;if(u){const g=(l=(0,re.getErrorCode)(u))!==null&&l!==void 0?l:re.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(r,"switchEthereumChain",u instanceof Error?u:re.standardErrors.provider.unsupportedChain(e),g)}else this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r,response:{method:"switchEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},h=u=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r,response:{method:"switchEthereumChain",result:{isApproved:!0,rpcUrl:u}}})};this.ui.switchEthereumChain({onCancel:d,onApprove:h,chainId:n.params.chainId,address:n.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(r,n)}),cancel:a}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return F.Session.hash(this._session.id)}sendRequestStandalone(e,s){const n=a=>{this.handleErrorResponse(e,s.method,a)},r=a=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:a})};switch(s.method){case"signEthereumMessage":this.ui.signEthereumMessage({request:s,onSuccess:r,onCancel:n});break;case"signEthereumTransaction":this.ui.signEthereumTransaction({request:s,onSuccess:r,onCancel:n});break;case"submitEthereumTransaction":this.ui.submitEthereumTransaction({request:s,onSuccess:r,onCancel:n});break;case"ethereumAddressFromSignedMessage":this.ui.ethereumAddressFromSignedMessage({request:s,onSuccess:r});break;default:n();break}}}we.WalletLinkRelay=j;j.accountRequestCallbackIds=new Set;var Re={},at={},Os={};(function(t){var e=C&&C.__createBinding||(Object.create?function(n,r,a,o){o===void 0&&(o=a);var i=Object.getOwnPropertyDescriptor(r,a);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(n,o,i)}:function(n,r,a,o){o===void 0&&(o=a),n[o]=r[a]}),s=C&&C.__exportStar||function(n,r){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&e(r,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),s(Mt,t)})(Os);var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";var Ts=C&&C.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(at,"__esModule",{value:!0});at.RedirectDialog=void 0;const Pi=Ts(Ae),T=R,Di=Me,Oi=Os,Ti=Ts(Rt);class ji{constructor(){this.root=null}attach(){const e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),(0,Di.injectCssReset)()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,T.render)(null,this.root),e&&(0,T.render)((0,T.h)(Bi,Object.assign({},e,{onDismiss:()=>{this.clear()}})),this.root))}}at.RedirectDialog=ji;const Bi=({title:t,buttonText:e,darkMode:s,onButtonClick:n,onDismiss:r})=>{const a=s?"dark":"light";return(0,T.h)(Oi.SnackbarContainer,{darkMode:s},(0,T.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,T.h)("style",null,Ti.default),(0,T.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:r}),(0,T.h)("div",{class:(0,Pi.default)("-cbwsdk-redirect-dialog-box",a)},(0,T.h)("p",null,t),(0,T.h)("button",{onClick:n},e))))};Object.defineProperty(Re,"__esModule",{value:!0});Re.MobileRelayUI=void 0;const Ui=at;class Wi{constructor(e){this.attached=!1,this.darkMode=!1,this.redirectDialog=new Ui.RedirectDialog,this.darkMode=e.darkMode}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}setConnected(e){}redirectToCoinbaseWallet(e){const s=new URL("https://go.cb-w.com/walletlink");s.searchParams.append("redirect_url",window.location.href),e&&s.searchParams.append("wl_url",e);const n=document.createElement("a");n.target="cbw-opener",n.href=s.href,n.rel="noreferrer noopener",n.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",darkMode:this.darkMode,onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}hideRequestEthereumAccounts(){this.redirectDialog.clear()}requestEthereumAccounts(){}addEthereumChain(){}watchAsset(){}selectProvider(){}switchEthereumChain(){}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}reloadUI(){}setStandalone(){}setConnectDisabled(){}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}isStandalone(){return!1}}Re.MobileRelayUI=Wi;Object.defineProperty(We,"__esModule",{value:!0});We.MobileRelay=void 0;const Fi=Y,Hi=we,$i=Re;class Vi extends Hi.WalletLinkRelay{constructor(e){var s;super(e),this._enableMobileWalletLink=(s=e.enableMobileWalletLink)!==null&&s!==void 0?s:!1}requestEthereumAccounts(){return this._enableMobileWalletLink?super.requestEthereumAccounts():{promise:new Promise(()=>{const e=(0,Fi.getLocation)();e.href=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(e.href)}`}),cancel:()=>{}}}publishWeb3RequestEvent(e,s){if(super.publishWeb3RequestEvent(e,s),!(this._enableMobileWalletLink&&this.ui instanceof $i.MobileRelayUI))return;let n=!1;switch(s.method){case"requestEthereumAccounts":case"connectAndSignIn":n=!0,this.ui.openCoinbaseWalletDeeplink(this.getQRCodeUrl());break;case"switchEthereumChain":return;default:n=!0,this.ui.openCoinbaseWalletDeeplink();break}n&&window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0})}handleWeb3ResponseMessage(e){super.handleWeb3ResponseMessage(e)}connectAndSignIn(e){if(!this._enableMobileWalletLink)throw new Error("connectAndSignIn is supported only when enableMobileWalletLink is on");return this.sendRequest({method:"connectAndSignIn",params:{appName:this.appName,appLogoUrl:this.appLogoUrl,domain:window.location.hostname,aud:window.location.href,version:"1",type:"eip4361",nonce:e.nonce,iat:new Date().toISOString(),chainId:`eip155:${this.dappDefaultChain}`,statement:e.statement,resources:e.resources}})}}We.MobileRelay=Vi;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.RelayEventManager=void 0;const qi=Y;class zi{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,s=(0,qi.prepend0x)(e.toString(16));return this.callbacks.get(s)&&this.callbacks.delete(s),e}}ot.RelayEventManager=zi;Object.defineProperty(be,"__esModule",{value:!0});be.CoinbaseWalletSDK=void 0;const Zi=Te,Gi=je,os=Y,Qi=Ue,Ki=pt,Yi=We,Ji=Re,Xi=ot,ea=Ie,ta=we,js=le;class ct{constructor(e){var s,n,r;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const a=e.linkAPIUrl||Gi.LINK_API_URL;typeof e.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=e.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(s=e.overrideIsCoinbaseWallet)!==null&&s!==void 0?s:!0,this._overrideIsCoinbaseBrowser=(n=e.overrideIsCoinbaseBrowser)!==null&&n!==void 0?n:!1,this._diagnosticLogger=e.diagnosticLogger,this._reloadOnDisconnect=(r=e.reloadOnDisconnect)!==null&&r!==void 0?r:!0;const o=new URL(a),i=`${o.protocol}//${o.host}`;if(this._storage=new Qi.ScopedLocalStorage(`-walletlink:${i}`),this._storage.setItem("version",ct.VERSION),this.walletExtension||this.coinbaseBrowser)return;this._relayEventManager=new Xi.RelayEventManager;const c=(0,os.isMobileWeb)(),d=e.uiConstructor||(u=>c?new Ji.MobileRelayUI(u):new ea.WalletLinkRelayUI(u)),h={linkAPIUrl:a,version:js.LIB_VERSION,darkMode:!!e.darkMode,headlessMode:!!e.headlessMode,uiConstructor:d,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect,enableMobileWalletLink:e.enableMobileWalletLink};this._relay=c?new Yi.MobileRelay(h):new ta.WalletLinkRelay(h),this.setAppInfo(e.appName,e.appLogoUrl),!e.headlessMode&&this._relay.attachUI()}makeWeb3Provider(e="",s=1){const n=this.walletExtension;if(n)return this.isCipherProvider(n)||n.setProviderInfo(e,s),this._reloadOnDisconnect===!1&&typeof n.disableReloadOnDisconnect=="function"&&n.disableReloadOnDisconnect(),n;const r=this.coinbaseBrowser;if(r)return r;const a=this._relay;if(!a||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return e||a.setConnectDisabled(!0),new Ki.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(a),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:e,chainId:s,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(e,s){var n;this._appName=e||"DApp",this._appLogoUrl=s||(0,os.getFavicon)();const r=this.walletExtension;r?this.isCipherProvider(r)||r.setAppInfo(this._appName,this._appLogoUrl):(n=this._relay)===null||n===void 0||n.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var e;const s=this===null||this===void 0?void 0:this.walletExtension;s?s.close():(e=this._relay)===null||e===void 0||e.resetAndReload()}getQrUrl(){var e,s;return(s=(e=this._relay)===null||e===void 0?void 0:e.getQRCodeUrl())!==null&&s!==void 0?s:null}getCoinbaseWalletLogo(e,s=240){return(0,Zi.walletLogo)(e,s)}get walletExtension(){var e;return(e=window.coinbaseWalletExtension)!==null&&e!==void 0?e:window.walletLinkExtension}get coinbaseBrowser(){var e,s;try{const n=(e=window.ethereum)!==null&&e!==void 0?e:(s=window.top)===null||s===void 0?void 0:s.ethereum;return n&&"isCoinbaseBrowser"in n&&n.isCoinbaseBrowser?n:void 0}catch{return}}isCipherProvider(e){return typeof e.isCipher=="boolean"&&e.isCipher}}be.CoinbaseWalletSDK=ct;ct.VERSION=js.LIB_VERSION;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=t.CoinbaseWalletSDK=void 0;const e=be,s=pt;var n=be;Object.defineProperty(t,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return n.CoinbaseWalletSDK}});var r=pt;Object.defineProperty(t,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return r.CoinbaseWalletProvider}}),t.default=e.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=e.CoinbaseWalletSDK,window.CoinbaseWalletProvider=s.CoinbaseWalletProvider,window.WalletLink=e.CoinbaseWalletSDK,window.WalletLinkProvider=s.CoinbaseWalletProvider)})(cs);const sa=Ys(cs),ia=Object.freeze(Object.defineProperty({__proto__:null,default:sa},Symbol.toStringTag,{value:"Module"}));export{ia as i};
